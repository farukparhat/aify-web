<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>aify</title>
    <link rel="stylesheet" href="./index.css" />
    <link rel="icon" type="image/x-icon" href="favicon.png" />
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  </head>
  <body>
    <form name="contact" netlify netlify-honeypot="bot-field" hidden>
      <input type="email" name="email" />
    </form>

    <div id="root"></div>

    <script type="text/babel">
      const encode = (data) => {
        return Object.keys(data)
          .map(
            (key) =>
              encodeURIComponent(key) + "=" + encodeURIComponent(data[key])
          )
          .join("&");
      };

      const HuggingFaceComponent = () => {
        const [query, setQuery] = React.useState("bmw");
        const [data, setData] = React.useState(null);
        const [loading, setLoading] = React.useState(false);
        const [imgUrl, setImgUrl] = React.useState("bmw.png");
        const [failed, setFailed] = React.useState(false);

        const handleChange = (event) => {
          setQuery(event.target.value);
        };

        const queryHuggingFace = async (data) => {
          const response = await fetch(
            "https://api-inference.huggingface.co/models/Alexwww/alex-s-one-line-art",
            {
              headers: {
                Authorization: "Bearer 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",
              },
              method: "POST",
              body: JSON.stringify(data),
            }
          );

          if (!response.ok) {
            setFailed(true);
            throw response;
          }

          const result = await response.blob();
          return result;
        };

        const handleCreate = async () => {
          setLoading(true);
          try {
            queryHuggingFace({
              inputs: `one line art drawing of a ${query}`,
            }).then((response) => {
              console.log(response);
              setImgUrl(URL.createObjectURL(response));
              setLoading(false);
            }).catch(error => {
              console.error(error);
            });
          } catch (error) {
            console.error(error);
            setLoading(false);
          }
        };

        const handleKeyUp = (event) => {
          if (event.key === 'Enter') {
            handleCreate();
          }
        }

        return (
          <div className="hugging-face-component">
            <div className="input-container">
              <input
                className="hugging-face-input"
                value={query}
                onChange={handleChange}
                onKeyUp={handleKeyUp}
              />
              <button onClick={handleCreate}>Create</button>
            </div>
            <div className="image-result-container">
              {failed ? (
                <div className="too-many-requests">
                  It looks like we are experiencing heavy traffic.
                  <br />
                  Please refresh the page and try again later.
                </div>
              ) : (
                <img
                  src={loading ? "puff.svg" : imgUrl}
                  className={loading && "loading-image"}
                />
              )}
            </div>
          </div>
        );
      };

      class ContactForm extends React.Component {
        constructor(props) {
          super(props);
          this.state = { email: "", showPopup: false };
        }

        /* Here’s the juicy bit for posting the form submission */

        handleSubmit = (e) => {
          this.setState({ showPopup: true });
          fetch("/", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: encode({ "form-name": "contact", email: this.state.email }),
          }).catch();

          e.preventDefault();
        };

        handleChange = (e) =>
          this.setState({ [e.target.name]: e.target.value });

        render() {
          const { email, showPopup } = this.state;
          return (
            <div id="main">
              <div id="popup" style={{ display: showPopup ? "flex" : "none" }}>
                <div>
                  <div
                    id="x"
                    onClick={() => this.setState({ showPopup: false })}
                  >
                    <img src="x.png" width="14" height="14" />
                  </div>
                  <h2>Try aify in Discord!</h2>
                  <div className="b3">You are now on the waitlist</div>
                  <a
                    className="discord"
                    href="https://discord.gg/uVRq6zWGbz"
                    target="_blank"
                  >
                    <img src="discord.png" width="32px" height="24px" />
                    Join Discord
                  </a>
                </div>
              </div>
              <a
                id="top-right"
                className="discord"
                href="https://discord.gg/uVRq6zWGbz"
                target="_blank"
              >
                Join Discord{" "}
              </a>
              <div id="content">
                <img id="logo" src="logo.png" width="500" height="600"></img>
                <h1>
                  Create your own AI
                  <br />
                  with no code
                </h1>
                <div className="center gray-text">
                  aify uses your image only on your AI.
                  <br /> Create your own customized AI.
                </div>
                <form onSubmit={this.handleSubmit}>
                  <div id="email-input">
                    <input
                      type="email"
                      name="email"
                      value={email}
                      placeholder="email@email.com"
                      onChange={this.handleChange}
                    />
                    <button type="submit">Get Access</button>
                  </div>
                </form>
                <div className="center gray-text underlined">
                  <a className="request-help" href="mailto:aify.help@gmail.com">
                    Request demo
                  </a>
                </div>
                <div id="bottom-images">
                  <div className="forty-percent-width">
                    <img id="first-image" src="first-image.png" />
                    <span>
                      <img
                        src="input.png"
                        width="16px"
                        height="16px"
                        className="pad-right"
                      />
                      Upload 5 to 20 images
                    </span>
                  </div>
                  <div>
                    <img id="after-minutes" src="after-minutes.png" />
                  </div>
                  <div className="forty-percent-width">
                    <img id="second-image" src="second-image.png" />
                    <span>
                      <img
                        src="ai.png"
                        width="16px"
                        height="16px"
                        className="pad-right"
                      />
                      Create your own AI with your own assets
                    </span>
                  </div>
                </div>
              </div>
              <h3>Try line art AI created with aify</h3>
              <HuggingFaceComponent />
              <h3>How aify works</h3>
              <div className="video">
                <iframe
                  width="560"
                  height="315"
                  src="https://www.youtube.com/embed/z_FnFom8t9A"
                  title="YouTube video player"
                  frameBorder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  allowFullScreen
                ></iframe>
              </div>
              <h3>Aify models by our users</h3>
              <div className="cards-container">
                <div className="try-card">
                  <span className="card-title">
                    Photography by @realjasonmatias
                  </span>
                  <div className="images-row">
                    <div>
                      <img src="try-1-1.png" className="try-image" />
                      <div className="input">
                        <img src="input.png" width="16px" height="16px" />
                        Jason’s photography
                      </div>
                    </div>
                    <img className="vector" src="vector.png" />
                    <div>
                      <img src="try-1-2.png" className="try-image" />
                      <div className="ai">
                        <img src="ai.png" width="16px" height="16px" />
                        AI prompt: Tree
                      </div>
                    </div>
                  </div>
                </div>
                <div className="try-card">
                  <span className="card-title">
                    Illustration by @georgie.illust
                  </span>
                  <div className="images-row">
                    <div>
                      <img src="try-2-1.png" className="try-image" />
                      <div className="input">
                        <img src="input.png" width="16px" height="16px" />
                        George’s illustrations
                      </div>
                    </div>
                    <img className="vector" src="vector.png" />
                    <div>
                      <img src="try-2-2.png" className="try-image" />
                      <div className="ai">
                        <img src="ai.png" width="16px" height="16px" />
                        AI prompt: Tree
                      </div>
                    </div>
                  </div>
                </div>
                <div className="try-card">
                  <span className="card-title">Line art by @alex</span>
                  <div className="images-row">
                    <div>
                      <img src="try-3-1.png" className="try-image" />
                      <div className="input">
                        <img src="input.png" width="16px" height="16px" />
                        Alex’s line drawings
                      </div>
                    </div>
                    <img className="vector" src="vector.png" />
                    <div>
                      <img src="try-3-2.png" className="try-image" />
                      <div className="ai">
                        <img src="ai.png" width="16px" height="16px" />
                        AI prompt: Tree
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <h3>Pricing</h3>
              <div className="flex-row pricing-cards-container">
                <div className="pricing-card free">
                  <span className="card-title">Free</span>
                  <p>
                    -Use aify in Discord
                    <br />
                    -Training your AI with your images
                    <br />
                    -Request your AI to aify engineers
                    <br />
                  </p>
                  <a
                    className="button"
                    href="https://discord.gg/uVRq6zWGbz"
                    target="_blank"
                  >
                    Try in Discord
                  </a>
                </div>
                <div className="pricing-card pro">
                  <span className="card-title">Pro</span>
                  <p>
                    -Personalize aify account
                    <br />
                    -Unlimited image generation
                    <br />
                    -Super high quality images
                    <br />
                    -Monetize your AI
                    <br />
                    -AI customization
                    <br />
                    -Share your AI with others
                    <br />
                    -Customer support
                    <br />
                  </p>
                  <a className="button" href="mailto:aify.help@gmail.com">
                    Contact us!
                  </a>
                </div>
              </div>
            </div>
          );
        }
      }

      ReactDOM.render(<ContactForm />, document.getElementById("root"));
    </script>
  </body>
</html>
